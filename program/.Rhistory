mutate(VEMF = factor(VEMF, levels=df_fin[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = df_fin[4,], labels = df_fin[2,])
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="Final energy (EJ/year)", fill = "fuel")
png(paste(df_path[df_path$name=="figure",]$path,"Final_energy_industry.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
dev.off()
!(true)
str_detect(VEMF, "^Fin_Ene_Ind_")
str_detect(df_fin, "^Fin_Ene_Ind_")
!(str_detect(df_fin, "^Fin_Ene_Ind_"))
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(!(str_detect(VEMF, "^Fin_Ene_Ind_|^Fin_Ene_Tra_|^Fin_Ene_Bui_|")))%>%
filter(VEMF %in% df_fin[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_fin[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = df_fin[4,], labels = df_fin[2,])
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="Final energy (EJ/year)", fill = "fuel")
png(paste(df_path[df_path$name=="figure",]$path,"Final_energy_industry.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(!(str_detect(VEMF, "^Fin_Ene_Ind_|^Fin_Ene_Tra_|^Fin_Ene_Bui_|")))%>%
filter(VEMF %in% df_fin[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_fin[1,]))%>%
View()
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter((str_detect(VEMF, "^Fin_Ene_Ind_|^Fin_Ene_Tra_|^Fin_Ene_Bui_|")))%>%
filter(VEMF %in% df_fin[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_fin[1,]))%>%
View()
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(!(str_detect(VEMF, "^Fin_Ene_Ind_|^Fin_Ene_Tra_|^Fin_Ene_Bui_")))%>%
filter(VEMF %in% df_fin[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_fin[1,]))%>%
View()
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(!(str_detect(VEMF, "^Fin_Ene_Ind_|^Fin_Ene_Tra_|^Fin_Ene_Bui_")))%>%
filter(VEMF %in% df_fin[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_fin[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = df_fin[4,], labels = df_fin[2,])
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="Final energy (EJ/year)", fill = "fuel")
png(paste(df_path[df_path$name=="figure",]$path,"Final_energy.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
dev.off()
dev.off()
#Ttile: visualize AIMHub output
#Date: 2023/6/13
#Name: Osamu Nishiura
#Package load-------------------------------------------------------------------
library(tidyverse)
library(gdxrrw)
#Directory Preparation----------------------------------------------------------
if (dir.exists("../output/figure/main") == "FALSE") {dir.create("../output/figure/main", recursive = T)}
if (dir.exists("../output/figure/other") == "FALSE") {dir.create("../output/figure/other", recursive = T)}
if (dir.exists("../module") == "FALSE") {dir.create("../module")}
#Setting import-----------------------------------------------------------------
df_path    <- read_csv("../define/path.csv")
df_filter  <- read_csv("../define/filter.csv")
df_pri     <- read_csv("../define/primary_energy.csv")
df_sec     <- read_csv("../define/secondary_energy.csv")
df_fin     <- read_csv("../define/final_energy.csv")
my_theme<-theme(
panel.background = element_rect(fill = "transparent", colour = "black"),
panel.grid = element_blank(),
strip.background = element_blank(),
legend.key = element_blank()
)
#Data import--------------------------------------------------------------------
df_iamc<-rgdx.param(paste(df_path[df_path$name=="IAMC",]$path,"global_17_IAMC.gdx",sep="/"), "IAMC_Template")%>%
filter(str_detect(VEMF, paste(df_filter$VEMF,collapse="|")),
str_detect(YEMF, paste(df_filter$YEMF,collapse="|")),
str_detect(REMF, paste(df_filter$REMF,collapse="|")))%>%
mutate(year=as.numeric(as.character(YEMF)))
#Figuress-----------------------------------------------------------------------
#GDP and Consumption loss-------------------------------------------------------
p <- df_iamc%>%
filter(VEMF=="Pol_Cos_GDP_Los_rat"|VEMF=="Pol_Cos_Cns_Los_rat",REMF=="World",YEMF!="2010",YEMF!="2015")%>%
ggplot(aes(x=year , y = IAMC_Template, color = SCENARIO,group = SCENARIO))
p <- p + facet_wrap(. ~ VEMF, scales="free", nrow=1)
p <- p + geom_line(linewidth=1.2)
p <- p + labs(x="Year", y="Economic loss (%)",color="Scenarios")
p <- p + geom_hline(yintercept=0,color = "grey")
p <- p + my_theme
#p <- p + scale_x_discrete(label=lb_x_r)
p <- p + theme(legend.key.size = unit(1, 'cm'),
legend.position ="right",
strip.text.y = element_text(size = 20),
strip.text.x = element_text(size = 20),
axis.title = element_text(size = 20),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 0, hjust = 0.5, vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
png(paste(df_path[df_path$name=="figure",]$path,"GDP_HH_loss.png",sep="/"), width = 5000, height = 3000,res = 300)
print(p)
dev.off()
#Primary Energy-----------------------------------------------------------------
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(VEMF %in% df_pri[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_pri[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = df_pri[4,], labels = df_pri[2,])
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="Primary energy (EJ/year)", fill = "Source")
png(paste(df_path[df_path$name=="figure",]$path,"primary_energy.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
dev.off()
#Secandary Energy--------------------------------------------------------------
#Electricity
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(str_detect(VEMF, "^Sec_Ene_Ele_"))%>%
filter(VEMF %in% df_sec[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_sec[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = df_sec[4,], labels = df_sec[2,])
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="Power generation (EJ/year)", fill = "Source")
png(paste(df_path[df_path$name=="figure",]$path,"Electricity.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
dev.off()
#Hydrogen
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(str_detect(VEMF, "^Sec_Ene_Hyd_"))%>%
filter(VEMF %in% df_sec[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_sec[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = df_sec[4,], labels = df_sec[2,])
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="Power generation (EJ/year)", fill = "Source")
png(paste(df_path[df_path$name=="figure",]$path,"Hydrogen.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
dev.off()
#Final Energy-------------------------------------------------------------------
#Total
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(!(str_detect(VEMF, "^Fin_Ene_Ind_|^Fin_Ene_Tra_|^Fin_Ene_Bui_")))%>%
filter(VEMF %in% df_fin[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_fin[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = df_fin[4,], labels = df_fin[2,])
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="Final energy (EJ/year)", fill = "fuel")
png(paste(df_path[df_path$name=="figure",]$path,"Final_energy.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
dev.off()
#Transport
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(str_detect(VEMF, "^Fin_Ene_Tra_"))%>%
filter(VEMF %in% df_fin[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_fin[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = df_fin[4,], labels = df_fin[2,])
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="Final energy (EJ/year)", fill = "fuel")
png(paste(df_path[df_path$name=="figure",]$path,"Final_energy_transport.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
dev.off()
#Industry
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(str_detect(VEMF, "^Fin_Ene_Ind_"))%>%
filter(VEMF %in% df_fin[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_fin[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = df_fin[4,], labels = df_fin[2,])
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="Final energy (EJ/year)", fill = "fuel")
png(paste(df_path[df_path$name=="figure",]$path,"Final_energy_industry.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
dev.off()
#Building
#Value added--------------------------------------------------------------------
df_emi     <- read_csv("../define/emission.csv")
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(VEMF %in% df_emi[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_emi[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = df_emi[4,], labels = df_emi[2,])
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="CO2 emission", fill = "fuel")
png(paste(df_path[df_path$name=="figure",]$path,"emission.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(VEMF %in% df_emi[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_emi[1,]))%>%
View()
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(VEMF %in% df_emi[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_emi[1,]))%>%
View()
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(VEMF %in% df_emi[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_emi[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="CO2 emission", fill = "fuel")
png(paste(df_path[df_path$name=="figure",]$path,"emission.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
dev.off()
df_emi[4,]
labels = df_emi[2,]
df_emi[2,]
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(VEMF %in% df_emi[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_emi[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = df_emi[4,], labels = df_emi[2,])
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="CO2 emission", fill = "source")
png(paste(df_path[df_path$name=="figure",]$path,"emission.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
rlang::last_trace()
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(VEMF %in% df_emi[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_emi[1,]))%>%
View()
View(df_emi)
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(VEMF %in% df_emi[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_emi[1,]))%>%
View()
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(VEMF %in% df_emi[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_emi[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = df_emi[4,], labels = df_emi[2,])
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="CO2 emission", fill = "source")
png(paste(df_path[df_path$name=="figure",]$path,"emission.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(VEMF %in% df_emi[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_emi[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = df_emi[4,])
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="CO2 emission", fill = "source")
png(paste(df_path[df_path$name=="figure",]$path,"emission.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(VEMF %in% df_emi[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_emi[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = c("red","green"))
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="CO2 emission", fill = "source")
png(paste(df_path[df_path$name=="figure",]$path,"emission.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(VEMF %in% df_emi[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_emi[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = df_fin[4,])
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="CO2 emission", fill = "source")
png(paste(df_path[df_path$name=="figure",]$path,"emission.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(VEMF %in% df_emi[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_emi[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = c(aaa="red"))
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="CO2 emission", fill = "source")
png(paste(df_path[df_path$name=="figure",]$path,"emission.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
dev.off()
df_emi     <- read_csv("../define/emission.csv")
c(aaa="red")
df_fin[4,]
df_emi[4,]
df_emi     <- read_csv("../define/emission.csv")
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(VEMF %in% df_emi[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_emi[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = df_emi[4,])
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="CO2 emission", fill = "source")
png(paste(df_path[df_path$name=="figure",]$path,"emission.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
#CO2 emission-------------------------------------------------------------------
p <- df_iamc%>%
filter(REMF=="World",YEMF!="2005",YEMF!="2010",YEMF!="2015")%>%
filter(VEMF %in% df_emi[1,])%>%
mutate(VEMF = factor(VEMF, levels=df_emi[1,]))%>%
ggplot(aes(x=YEMF , y=IAMC_Template ))
p <- p  + facet_grid( ~ SCENARIO ,scales="fixed")
p <- p　+ geom_hline(yintercept=0,color = "grey")
p <- p  + geom_bar(stat="identity",aes(fill=VEMF))
p <- p  + scale_fill_manual(values = c("green4","blue","red","yellow","purple","chocolate","navy","grey","pink","skyblue","gold"))
p <- p　+ my_theme
p <- p　+ theme(strip.text.y = element_text(size = 15),
strip.text.x = element_text(size = 15),
axis.title = element_text(size = 25),
legend.title= element_text(size = 20),
legend.text= element_text(size = 20),
axis.text.x = element_text(angle = 90, hjust = 1,vjust = 0.5,size = 20),
axis.text.y = element_text(size = 20))
p <- p + labs(x="Year", y="CO2 emission", fill = "source")
png(paste(df_path[df_path$name=="figure",]$path,"emission.png",sep="/"), width = length(unique(df_iamc$SCENARIO))*1500+1000, height = 3000,res = 300)
print(p)
dev.off()
